(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{54997:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake",function(){return n(51817)}])},55460:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(85893),s=n(11163),r=n(214),i=n.n(r),o=n(44423),u=n(10783),c=function(){var e;(0,s.useRouter)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:i().mainLogo,children:(0,a.jsx)("a",{href:(0,o.R)("index"),children:(0,a.jsx)("img",{src:(e="images/logo.png","./assets/".concat(e)),alt:(0,u.Q)("Stake NFT - earn ERC20","MainPage_Header")})})})})}},15200:function(e,t,n){"use strict";var a=n(10797),s=n(85893),r=n(44423),i=n(214),o=n.n(i),u=n(11163),c=n(31259),l=[{id:"index",title:"Home",link:"index"}].concat((0,a.Z)((0,c.S)("EnabledDemoMind",!0)?[{id:"mint",title:"Mint NFT",link:"mint"}]:[]),[{id:"stake",title:"Stake",link:"stake"},{id:"settings",title:"Settings",link:"settings",adminOnly:!0}]);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,u.useRouter)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("nav",{className:"".concat(o().mainNav),children:l.map((function(n){return n.adminOnly&&!t?null:(0,s.jsx)("a",{className:e===n.id?o().active:"",href:(0,r.R)(n.link),children:n.title},n.id)}))}),(0,s.jsx)("hr",{className:"".concat(o().divider," ").concat(o().spacerTop)})]})}},53419:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var a=n(47568),s=n(10797),r=n(34051),i=n.n(r),o=n(44431),u=function(){var e=(0,a.Z)(i().mark((function e(t,n,a,r){var u,c,l,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={from:t,gas:"0"},e.next=4,(u=n.methods)[a].apply(u,(0,s.Z)(r)).estimateGas(c);case 4:return l=e.sent,p=new o.BigNumber(new o.BigNumber(l).multipliedBy(1.05).toFixed(0)).toString(16),c.gas="0x"+p,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,s){return e.apply(this,arguments)}}()},31259:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var a=function(e,t){return t}},51817:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(47568),s=n(14924),r=n(26042),i=n(69396),o=n(10797),u=n(34051),c=n.n(u),l=n(85893),p=n(2593),d=n(35553),y=n(67294),f=n(214),m=n.n(f),h=n(78967),v=n(53419),k=n(15200),b=n(55460),w=n(10783),g=n(50070),x=n(67297),T=n.n(x),S=function(e){var t=e.tokenId,n=e.tokenUri,a=e.isApproved,s=e.onDeStake,r=e.onStake,i=e.isFetchUri,o=e.deStakeId,u=e.stakeId,c=e.isStaking,p=e.isDeStaking,d=e.isApproveDo,y=e.isApproveId;return(0,l.jsxs)("div",{className:m().nftBox,children:[!1!==n&&T()(n)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h3",{children:["#",t]}),(0,l.jsx)("img",{src:n})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h3",{children:["#",t]}),i&&(0,l.jsx)("h2",{children:"Fetch info"})]}),null!==s&&(0,l.jsx)("button",{disabled:p||c||d,className:"".concat(m().mainButton," ").concat(m().spacerBottom),onClick:s,children:p&&o===t?(0,l.jsx)(l.Fragment,{children:"De-staking..."}):(0,l.jsx)(l.Fragment,{children:"De-stake"})}),null!==r&&(0,l.jsx)("button",{className:"".concat(m().mainButton," ").concat(m().spacerBottom),onClick:r,disabled:p||c||d,children:c&&u===t?(0,l.jsx)(l.Fragment,{children:"Staking..."}):(0,l.jsx)(l.Fragment,{children:d&&y===t?(0,l.jsx)(l.Fragment,{children:"Approving..."}):(0,l.jsx)(l.Fragment,{children:a?"Stake":"Approve & Stake"})})})]},t.toString())},N=n(64914),j=n.n(N),M=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"string","name":"tokenURI","type":"string"}],"name":"mintNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]'),F=JSON.parse('[{"inputs":[{"internalType":"address","name":"_nftCollection","type":"address"},{"internalType":"contract IERC20","name":"_rewardsToken","type":"address"},{"internalType":"uint256","name":"_rewardsPerHour","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[],"name":"adminWithdrawRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_staker","type":"address"}],"name":"availableRewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"claimRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getStakedTokens","outputs":[{"components":[{"internalType":"address","name":"staker","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"internalType":"struct Farm.StakedToken[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nftCollection","outputs":[{"internalType":"contract IERC721","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rewardsToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_rewardsPerHour","type":"uint256"}],"name":"setRewardsPerHour","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"stakerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"stakers","outputs":[{"internalType":"uint256","name":"amountStaked","type":"uint256"},{"internalType":"uint256","name":"timeOfLastUpdate","type":"uint256"},{"internalType":"uint256","name":"unclaimedRewards","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),C=JSON.parse('[{"constant":false,"inputs":[{"components":[{"name":"target","type":"address"},{"name":"callData","type":"bytes"}],"name":"calls","type":"tuple[]"}],"name":"aggregate","outputs":[{"name":"blockNumber","type":"uint256"},{"name":"returnData","type":"bytes[]"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"blockNumber","type":"uint256"}],"name":"getBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockCoinbase","outputs":[{"name":"coinbase","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockDifficulty","outputs":[{"name":"difficulty","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockGasLimit","outputs":[{"name":"gaslimit","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockTimestamp","outputs":[{"name":"timestamp","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"getEthBalance","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getLastBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"}]'),I=n(64262),R=new(n(81586).vU)(M),A=function(e){console.log(e)},O=function(){var e=(0,g.Z)(),t=e.storageData,n=e.isOwner,u=(0,y.useState)(null===t||void 0===t?void 0:t.chainId),f=u[0],x=u[1],T=(0,y.useState)(null===t||void 0===t?void 0:t.nftCollection),N=T[0],O=T[1],Z=(0,y.useState)(null===t||void 0===t?void 0:t.rewardToken),E=Z[0],B=Z[1],D=(0,y.useState)(null===t||void 0===t?void 0:t.farmContract),U=D[0],_=D[1],L=(0,y.useState)(!1),P=L[0],H=L[1],Y=(0,y.useState)(!1),W=Y[0],V=Y[1],G=(0,y.useState)(!1),J=G[0],X=G[1],Q=(0,y.useState)(!1),$=Q[0],q=Q[1],z=(0,y.useState)(!1),K=z[0],ee=z[1],te=(0,y.useState)(!1),ne=te[0],ae=te[1],se=(0,y.useState)(!1),re=se[0],ie=se[1],oe=(0,y.useState)(!0),ue=(oe[0],oe[1]),ce=(0,y.useState)(!1),le=ce[0],pe=ce[1],de=(0,y.useState)(!1),ye=de[0],fe=de[1],me=(0,y.useState)(!1),he=me[0],ve=me[1],ke=(0,y.useState)(!1),be=ke[0],we=ke[1],ge=(0,y.useState)(!1),xe=ge[0],Te=ge[1],Se=(0,y.useState)(!0),Ne=(Se[0],Se[1]),je=(0,y.useState)(!1),Me=(je[0],je[1]),Fe=(0,y.useState)(!1),Ce=Fe[0],Ie=Fe[1],Re=(0,y.useState)(!0),Ae=Re[0],Oe=Re[1],Ze=(0,y.useState)(!1),Ee=Ze[0],Be=Ze[1],De=(0,y.useState)(!1),Ue=De[0],_e=De[1],Le=(0,y.useState)(!0),Pe=(Le[0],Le[1]),He=(0,y.useState)(!0),Ye=He[0],We=He[1],Ve=(0,y.useState)(!1),Ge=(Ve[0],Ve[1]),Je=(0,y.useState)([]),Xe=Je[0],Qe=Je[1],$e=(0,y.useState)({}),qe=$e[0],ze=$e[1],Ke=(0,y.useState)(!1),et=Ke[0],tt=Ke[1],nt=(0,y.useState)(!1),at=(nt[0],nt[1]),st=(0,y.useState)([]),rt=st[0],it=st[1],ot=(0,y.useState)({}),ut=ot[0],ct=ot[1],lt=(0,y.useState)(!0),pt=lt[0],dt=lt[1],yt=(0,y.useState)(!1),ft=(yt[0],yt[1],(0,y.useState)(!0)),mt=ft[0],ht=ft[1],vt=(0,y.useState)(!1),kt=(vt[0],vt[1]),bt=(0,y.useState)(!1),wt=(bt[0],bt[1]),gt=(0,y.useState)(!1),xt=gt[0],Tt=gt[1],St=(0,y.useState)(!1),Nt=St[0],jt=St[1],Mt=(0,y.useState)(!1),Ft=Mt[0],Ct=Mt[1],It=(0,y.useState)(!1),Rt=It[0],At=It[1],Ot=(0,y.useState)(!1),Zt=Ot[0],Et=Ot[1],Bt=(0,y.useState)(!1),Dt=Bt[0],Ut=Bt[1],_t=(0,y.useState)(!1),Lt=_t[0],Pt=_t[1],Ht=(0,y.useState)(!1),Yt=Ht[0],Wt=Ht[1],Vt=(0,y.useState)(!1);Vt[0],Vt[1];(0,y.useEffect)((function(){t&&t.chainId&&t.nftCollection&&t.rewardToken&&t.farmContract&&(x(t.chainId),O(t.nftCollection),B(t.rewardToken),_(t.farmContract))}),[t]);var Gt=(0,y.useState)([]),Jt=Gt[0],Xt=Gt[1],Qt=(0,y.useState)(!1);Qt[0],Qt[1];(0,y.useEffect)((function(){var e=setTimeout((function(){var e=(0,o.Z)(Jt);e.shift(),Xt(e)}),5e3);return function(){return clearTimeout(e)}}),[Jt]);var $t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=(0,o.Z)(Jt);n.push({msg:e,style:t}),Xt((0,o.Z)(n))},qt=function(e,t){var n=!1;try{n=e.message.replace("Internal JSON-RPC error.",""),n=JSON.parse(n)}catch(a){}switch(n&&n.message?n.message:e.message){case"execution reverted: You don't own this token!":console.log("You dont own this token");break;case"MetaMask Tx Signature: User denied transaction signature.":console.log("Transaction denied");break;case"execution reverted: ERC721: invalid token ID":console.log("Invalid token ID");break;default:console.log("Unkrnown error",e.message)}},zt=function(){A("do fetchAvailableReward");try{pe(!1),ue(!0),$.methods.availableRewards(J).call().then((function(e){ie(e),ue(!1)}))}catch(e){console.log(">>> fail fetchAvailableReward"),qt(e),pe(!0)}},Kt=function(){A("do fetchTotalRewardBalance"),Oe(!0),Be(!1),he&&he.methods.balanceOf(U).call().then((function(e){Ie(e),Oe(!1)})).catch((function(e){Be(!0),console.log(">>> fetchTotalRewardBalance",e),qt(e)}))},en=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A("do fetchIsApproved"),Pe(!0);try{K.methods.isApprovedForAll(J,U).call().then((function(e){_e(e),Pe(!1)}))}catch(t){console.log(">>> fail check is approved"),qt(t),Pe(!1)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tn=function(e){return A("do fetchTokenUris"),new Promise((function(t,n){if(J&&K&&ne){var a=e.map((function(e){return{target:N,tokenId:e,callData:R.encodeFunctionData("tokenURI",[e])}}));ne.methods.aggregate(a).call().then((function(n){var a={};n.returnData.forEach((function(t,n){var s=R.decodeFunctionResult("tokenURI",t)[0];a[e[n]]=s})),t(a)})).catch((function(e){qt(e),n()}))}else n()}))},nn=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a,s,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A("do fetchUserNfts"),!(J&&K&&ne)||Ye){e.next=33;break}return ht(!0),kt(!1),t=!1,n=!1,a=0,s=0,e.prev=8,e.next=11,K.methods.totalSupply().call();case 11:a=e.sent,t=!0,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log("Fail fetch total supply");case 18:return e.prev=18,e.next=21,K.methods.MAX_SUPPLY().call();case 21:s=e.sent,n=!0,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(18),console.log("Fail fetch max supply");case 28:if(console.log("hasMaxSupply",n),console.log("hasTotalSupply",t),console.log("maxSupply",s),console.log("totalSupply",a),n||t){for(wt(!0),r=[],i=1;i<=(t?a:s);i++)r.push({target:N,callData:R.encodeFunctionData("ownerOf",[i])});ne.methods.aggregate(r).call().then((function(e){var t=[];e.returnData.forEach((function(e,n){R.decodeFunctionResult("ownerOf",e)[0]===J&&t.push(n+1)})),it(t),ht(!1),dt(!0),tn(t).then((function(e){ct(e),dt(!1)})).catch((function(e){dt(!1)}))})).catch((function(e){console.log(">>> fetchUserNfts",e),kt(!0),qt(e)}))}case 33:case"end":return e.stop()}}),e,null,[[8,15],[18,25]])})));return function(){return e.apply(this,arguments)}}();(0,y.useEffect)((function(){nn()}),[J,K,ne,$,Ye]);(0,y.useEffect)((function(){he&&(A("on useEffect rewardTokenContract"),he&&(Be(!1),Me(!1),Ne(!0),he.methods.decimals().call().then((function(e){he.methods.symbol().call().then((function(t){Ne(!1),Te(e),we(t),Kt()})).catch((function(e){console.log(">>> reward token info - fail fetch symbol"),Be(!0),Me(!0)}))})).catch((function(e){console.log(">>> reward token info - fail fetch decimals"),Be(!0),Me(!0)}))))}),[he]),(0,y.useEffect)((function(){$&&J&&(A("on useEffect farmContract && address"),zt(),A("do fetchStakedNfts"),J&&$&&(Ge(!1),at(!1),We(!0),$.methods.getStakedTokens(J).call().then((function(e){e=e.map((function(e){return e.tokenId})),Qe(e),We(!1),tt(!0),tn(e).then((function(e){ze(e),tt(!1)})).catch((function(e){tt(!1),at(!0)}))})).catch((function(e){Ge(!0),console.log(">>> fail fetchStakedNfts",e),qt(e)}))))}),[J,$]),(0,y.useEffect)((function(){J&&K&&(A("on useEffect address && nftContract"),en())}),[J,K]);var an=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W||"".concat(P)!="".concat(f)){e.next=4;break}W.eth.getAccounts().then((function(e){X(e[0]);var t=new W.eth.Contract(C,I.Ce[P]);console.log(t),ae(t);var n=new W.eth.Contract(M,N);ee(n);var a=new W.eth.Contract(j(),E);ve(a);var s=new W.eth.Contract(F,U);q(s)})).catch((function(e){console.log(">>> initOnWeb3Ready",e),qt(e)})),e.next=8;break;case 4:return e.next=6,(0,h.IC)();case 6:e.sent&&cn();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function sn(){return(sn=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J||!$){e.next=7;break}return fe(!0),$t("Confirm transaction..."),e.next=5,(0,v.A)(J,$,"claimRewards",[]);case 5:t=e.sent,$.methods.claimRewards().send(t).then((function(e){zt(),Kt(),fe(!1),$t("Reward claimed","success")})).catch((function(e){fe(!1),console.log(">>> claimRewards",e),qt(e),$t("Fail claim reward","error")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rn(e){return on.apply(this,arguments)}function on(){return on=(0,a.Z)(c().mark((function e(t){var n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(J&&$&&K)){e.next=22;break}if(n=function(){var e=(0,a.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,jt(!0),Ct(t),$t("Confirm stake transaction"),e.next=6,(0,v.A)(J,$,"stake",[t]);case 6:n=e.sent,$.methods.stake(t).send(n).then((function(){var e=Xe;e.push(t),Qe(e),ze((0,i.Z)((0,r.Z)({},qe),(0,s.Z)({},"".concat(t),ut[t]))),it(rt.filter((function(e){return"".concat(e)!=="".concat(t)}))),ct((0,i.Z)((0,r.Z)({},ut),(0,s.Z)({},"".concat(t),!1))),jt(!1),Ct(!1),$t("NFT Staked!","success")})).catch((function(e){$t("Stake transaction failed","error"),console.log(">> stakeNft",e),qt(e),jt(!1),Ct(!1)})),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(0),$t("Stake transaction failed","error"),console.log(">> stakeNft calc gas",e.t0),qt(e.t0),jt(!1),Ct(!1);case 17:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Ue){e.next=21;break}return Pt(t),Ut(!0),$t("Confirm approve transaction"),e.prev=6,e.next=9,(0,v.A)(J,K,"setApprovalForAll",[U,!0]);case 9:o=e.sent,K.methods.setApprovalForAll(U,!0).send(o).then(function(){var e=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_e(!0),Ut(!1),$t("Successfull approved!","success"),n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){$t("Fail approve transaction","error"),console.log(">> stakeNft do approve",e),Ut(!1),qt(e)})),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(6),$t("Fail approve transaction","error"),console.log(">>> stakeNft do approve calc gas",e.t0),Ut(!1),qt(e.t0);case 19:e.next=22;break;case 21:n();case 22:case"end":return e.stop()}}),e,null,[[6,13]])}))),on.apply(this,arguments)}function un(){return(un=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J||!$){e.next=18;break}return e.prev=1,At(!0),Et(t),$t("Confirm withdraw transaction"),e.next=7,(0,v.A)(J,$,"withdraw",[t]);case 7:n=e.sent,$.methods.withdraw(t).send(n).then((function(e){var n=rt;n.push(t),it(n),Qe(Xe.filter((function(e){return e!==t}))),ct((0,i.Z)((0,r.Z)({},ut),(0,s.Z)({},"".concat(t),qe[t]))),ze((0,i.Z)((0,r.Z)({},qe),(0,s.Z)({},"".concat(t),!1))),At(!1),Et(!1),$t("NFT withdrawed","success")})).catch((function(e){console.log(">>> withdraw",e),qt(e),At(!1),Et(!1),$t("Withdraw NFT transaction failed","error")})),e.next=18;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(">>> withdraw calc gas",e.t0),qt(e.t0),At(!1),Et(!1),$t("Withdraw NFT transaction failed","error");case 18:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}(0,y.useEffect)((function(){A("on useEffect activeWeb3 initOnWeb3Ready"),f&&N&&E&&U&&an()}),[W,f,N,E,U]);var cn=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,h.pE)({onBeforeConnect:function(){Wt(!0)},onSetActiveChain:H,onConnected:function(e,t){V(t),Wt(!1)},onError:function(e){console.log(">>>> connectWithMetamask",e),qt(e),Wt(!1)},needChainId:f});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ln=(0,l.jsxs)("div",{className:"".concat(m().stakeCustomNftHolder),children:[(0,l.jsx)("b",{children:"Stake NFT by TokenId"}),(0,l.jsx)("input",{type:"number",onChange:function(e){return Tt(e.target.value)}}),(0,l.jsx)("button",{className:"".concat(m().mainButton," ").concat(m().spacerBottom),onClick:function(){xt&&(console.log(">>> stake custom nft",xt),rn(p.O$.from(xt).toNumber()))},disabled:Dt||Nt||Rt,children:Ue?"Stake":"Approve & Stake"})]}),pn=function(e){var t=e.message;e.onReload;return(0,l.jsx)("b",{children:t})};return(0,l.jsxs)("div",{className:m().container,children:[(0,k.Z)("stake",n),(0,b.Z)(),(0,l.jsx)("h1",{className:m().h1,children:(0,w.Q)("Stake Your NFTs - Earn ERC20","StakePage_Title")}),(0,l.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),J?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{children:"Your reward"}),(0,l.jsxs)("div",{className:m().tokenGrid,children:[(0,l.jsxs)("div",{className:m().tokenItem,children:[(0,l.jsx)("h3",{className:m().tokenLabel,children:"Claimable Rewards"}),(0,l.jsx)("p",{className:m().tokenValue,children:le?(0,l.jsx)(l.Fragment,{children:pn({message:"ERROR"})}):(0,l.jsx)("b",{children:re&&!1!==xe&&!1!==be?"".concat(d.bM(re,xe)," ").concat(be):"Loading..."})})]}),(0,l.jsxs)("div",{className:m().tokenItem,children:[(0,l.jsx)("h3",{className:m().tokenLabel,children:"Stake Farm balance"}),(0,l.jsx)("p",{className:m().tokenValue,children:Ee?(0,l.jsx)(l.Fragment,{children:pn({message:"ERROR"})}):(0,l.jsx)("b",{children:Ae||!Ce||!1===xe||!1===be?"Loading...":"".concat(d.bM(Ce,xe)," ").concat(be)})})]})]}),(0,l.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,l.jsxs)("b",{children:["Connected wallet ",J]}),(0,l.jsx)("button",{disabled:ye,className:"".concat(m().mainButton," ").concat(m().spacerTop),onClick:function(){return function(){return sn.apply(this,arguments)}()},children:ye?"Receiving an award...":"Claim Rewards"}),(0,l.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,l.jsx)("h2",{children:"Your Staked NFTs"}),(0,l.jsx)("div",{className:m().nftBoxGrid,children:Ye?(0,l.jsx)("p",{className:m().tokenValue,children:(0,l.jsx)("b",{children:"Loading..."})}):(0,l.jsx)(l.Fragment,{children:Xe.length>0?(0,l.jsx)(l.Fragment,{children:null===Xe||void 0===Xe?void 0:Xe.map((function(e){return S({tokenId:e,tokenUri:!!qe[e]&&qe[e],isApproved:Ue,onDeStake:function(){return function(e){return un.apply(this,arguments)}(e)},onStake:null,isFetchUri:et,deStakeId:Zt,stakeId:Ft,isStaking:Nt,isDeStaking:Rt,isApproveDo:Dt,isApproveId:Lt})}))}):(0,l.jsx)("p",{className:m().tokenValue,children:(0,l.jsx)("b",{children:"You dont have staked NFTs."})})})}),(0,l.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,l.jsx)("h2",{children:"Your Unstaked NFTs"}),ln,(0,l.jsx)("div",{className:m().nftBoxGrid,children:mt?(0,l.jsx)("p",{className:m().tokenValue,children:(0,l.jsx)("b",{children:"Loading..."})}):(0,l.jsx)(l.Fragment,{children:rt.length>0?(0,l.jsx)(l.Fragment,{children:null===rt||void 0===rt?void 0:rt.map((function(e){return S({tokenId:e,tokenUri:!!ut[e]&&ut[e],isApproved:Ue,onDeStake:null,onStake:function(){return rn(e)},isFetchUri:pt,deStakeId:Zt,stakeId:Ft,isStaking:Nt,isDeStaking:Rt,isApproveDo:Dt,isApproveId:Lt})}))}):(0,l.jsx)("p",{className:m().tokenValue,children:(0,l.jsx)("b",{children:"You dont have Unstaked NFTs."})})})})]}):(0,l.jsx)("button",{disabled:Yt,className:m().mainButton,onClick:cn,children:Yt?"Connecting":"Connect Wallet"}),!1,Jt.length>0&&(0,l.jsx)("div",{className:m().notifyHolder,children:Jt.map((function(e,t){return(0,l.jsx)("div",{className:"".concat(e.style?m()[e.style]:m().info),children:e.msg},t)}))})]})}},24654:function(){}},function(e){e.O(0,[885,586,686,774,888,179],(function(){return t=54997,e(e.s=t);var t}));var t=e.O();_N_E=t}]);