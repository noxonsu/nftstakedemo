(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{64914:function(e){e.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,type:"function"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_tokenName",type:"string"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenSymbol",type:"string"}],type:"constructor"},{payable:!1,type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}]},54997:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake",function(){return n(98204)}])},67333:function(e,t,n){"use strict";var a=n(85893),s=n(11163),r=n(214),o=n.n(r),i=n(36485);t.Z=function(e){(0,s.useRouter)();var t=e.getDesign,n=e.getText;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"".concat(o().mainLogo," logoAddParams"),children:(0,a.jsx)("a",{href:(0,i.Rg)("index"),children:(0,a.jsx)("img",{src:t("logoUri","uri",(0,i.Vh)("images/logo.png","mainLogo")),alt:n("Stake NFT - earn ERC20","MainPage_Header")})})})})}},15200:function(e,t,n){"use strict";var a=n(29815),s=n(85893),r=n(44423),o=n(214),i=n.n(o),c=n(11163),u=n(36485),l=[{id:"index",title:"Home",link:"index"}].concat((0,a.Z)((0,u.Sn)("EnabledDemoMind",!0)?[{id:"mint",title:"Mint NFT",link:"mint"}]:[]),[{id:"stake",title:"Stake",link:"stake"},{id:"settings",title:"Settings",link:"settings",adminOnly:!0}]);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,c.useRouter)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("nav",{className:"".concat(i().mainNav," headerNavMenu"),children:l.map((function(n){return n.adminOnly&&!t?null:(0,s.jsx)("a",{className:e===n.id?"".concat(i().active," headerNavActive"):"",href:(0,r.R)(n.link),children:n.title},n.id)}))}),(0,s.jsx)("div",{className:i().mainNavSeperator})]})}},77695:function(e,t,n){"use strict";var a=n(85893),s=n(214),r=n.n(s),o=n(27129),i=n(44423),c=n(73848),u=n(49738);t.Z=function(e){var t=e.tokenId,n=e.tokenUri,s=e.isApproved,l=e.onDeStake,p=e.onStake,d=e.isFetchUri,m=e.deStakeId,f=e.stakeId,y=e.isStaking,h=e.isDeStaking,k=e.isApproveDo,v=e.isApproveId,g=e.isMinted,b=e.farmStatus,x=e.tokenUtx,w=e.openConfirmWindow,S=!1;b&&b.version>=3&&b.lockEnabled&&(0,c.K)()<Number(x)+Number(b.lockTime)&&(S=!0);return(0,a.jsxs)("div",{className:"".concat(r().nftBox," nftTokenBox"),children:[!1!==n&&(0,o.Z)(n)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{children:["#",t]}),(0,a.jsx)("img",{src:n})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{children:["#",t]}),d&&(0,a.jsx)("h2",{children:"Fetch info"})]}),g?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("a",{className:"".concat(r().mainButton," ").concat(r().spacerBottom," primaryButton"),href:(0,i.R)("stake"),children:"Go to staking"})}):(0,a.jsxs)(a.Fragment,{children:[null!==l&&(0,a.jsx)(a.Fragment,{children:S?(0,a.jsx)("button",{onClick:function(){var e=Number(x)+Number(b.lockTime)-(0,c.K)();w({title:"NFT token is locked",message:"This token is currently locked. You can withdraw him out of the farm in ".concat((0,u.R)(e)),isOk:!0})},className:"".concat(r().mainButton," ").concat(r().spacerBottom," primaryButton"),children:"Locked"}):(0,a.jsx)("button",{disabled:h||y||k,className:"".concat(r().mainButton," ").concat(r().spacerBottom," primaryButton"),onClick:l,children:h&&m===t?(0,a.jsx)(a.Fragment,{children:"De-staking..."}):(0,a.jsx)(a.Fragment,{children:"De-stake"})})}),null!==p&&(0,a.jsx)("button",{className:"".concat(r().mainButton," ").concat(r().spacerBottom," primaryButton"),onClick:p,disabled:h||y||k,children:y&&f===t?(0,a.jsx)(a.Fragment,{children:"Staking..."}):(0,a.jsx)(a.Fragment,{children:k&&v===t?(0,a.jsx)(a.Fragment,{children:"Approving..."}):(0,a.jsx)(a.Fragment,{children:s?"Stake":"Approve & Stake"})})})]})]},t.toString())}},49738:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var a=function(e){var t=Number(e),n=Math.floor(t/3600),a=Math.floor(t%3600/60),s=Math.floor(t%3600%60);return(n>0?n+(1==n?" hour ":" hours "):"")+(a>0?a+(1==a?" minute ":" minutes "):"")+(s>0?s+(1==s?" second":" seconds"):"")}},53419:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var a=n(47568),s=n(29815),r=n(34051),o=n.n(r),i=n(44431),c=function(){var e=(0,a.Z)(o().mark((function e(t,n,a,r,c){var u,l,p,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={from:t,gas:"0"},c&&(l.value=new i.BigNumber(c)),e.next=5,(u=n.methods)[a].apply(u,(0,s.Z)(r)).estimateGas(l);case 5:return p=e.sent,d=new i.BigNumber(new i.BigNumber(p).multipliedBy(1.15).toFixed(0)).toString(16),l.gas="0x"+d,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,s,r){return e.apply(this,arguments)}}()},27129:function(e,t){"use strict";t.Z=function(e){return""!==e}},98204:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var a=n(47568),s=n(14924),r=n(26042),o=n(69396),i=n(34051),c=n.n(i),u=n(85893),l=(n(2593),n(35553)),p=n(67294),d=n(214),m=n.n(d),f=n(78967),y=n(53419),h=n(15200),k=n(67333),v=n(77695),g=n(73848),b=n(64914),x=n.n(b),w=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"string","name":"tokenURI","type":"string"}],"name":"mintNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]'),S=n(73853),T=n(99312),N=n(64262),j=n(81586),F=new j.vU(w),C=new j.vU(S.Mt),_=function(e){console.log(e)},A=function(e){var t=e.storageData,n=e.isOwner,i=e.openConfirmWindow,d=e.addNotify,b=e.getText,j=e.getDesign,A=(0,p.useState)(null===t||void 0===t?void 0:t.chainId),M=A[0],R=A[1],B=(0,p.useState)(null===t||void 0===t?void 0:t.nftCollection),I=B[0],Z=B[1],D=(0,p.useState)(null===t||void 0===t?void 0:t.rewardToken),E=D[0],U=D[1],O=(0,p.useState)(null===t||void 0===t?void 0:t.farmContract),Y=O[0],P=O[1],L=(0,p.useState)(!1),W=L[0],H=L[1],V=(0,p.useState)(!1),G=V[0],J=V[1],X=(0,p.useState)(!1),K=X[0],q=X[1],z=(0,p.useState)(!1),Q=z[0],$=z[1],ee=(0,p.useState)(!1),te=ee[0],ne=ee[1],ae=(0,p.useState)(!1),se=ae[0],re=ae[1],oe=(0,p.useState)(!1),ie=oe[0],ce=oe[1],ue=(0,p.useState)(!1),le=ue[0],pe=ue[1],de=(0,p.useState)(!1),me=de[0],fe=de[1],ye=(0,p.useState)(!1),he=ye[0],ke=ye[1],ve=(0,p.useState)(!0),ge=(ve[0],ve[1]),be=(0,p.useState)(!1),xe=be[0],we=be[1],Se=(0,p.useState)(!1),Te=Se[0],Ne=Se[1],je=(0,p.useState)(!1),Fe=je[0],Ce=je[1],_e=(0,p.useState)(!1),Ae=_e[0],Me=_e[1],Re=(0,p.useState)(!1),Be=Re[0],Ie=Re[1],Ze=(0,p.useState)(!0),De=(Ze[0],Ze[1]),Ee=(0,p.useState)(!1),Ue=(Ee[0],Ee[1]),Oe=(0,p.useState)(!1),Ye=Oe[0],Pe=Oe[1],Le=(0,p.useState)(!0),We=Le[0],He=Le[1],Ve=(0,p.useState)(!1),Ge=Ve[0],Je=Ve[1],Xe=(0,p.useState)(!1),Ke=Xe[0],qe=Xe[1],ze=(0,p.useState)(!0),Qe=(ze[0],ze[1]),$e=(0,p.useState)(!0),et=$e[0],tt=$e[1],nt=(0,p.useState)(!1),at=(nt[0],nt[1]),st=(0,p.useState)([]),rt=st[0],ot=st[1],it=(0,p.useState)([]),ct=it[0],ut=it[1],lt=(0,p.useState)({}),pt=lt[0],dt=lt[1],mt=(0,p.useState)(!1),ft=mt[0],yt=mt[1],ht=(0,p.useState)(!1),kt=(ht[0],ht[1]),vt=(0,p.useState)([]),gt=vt[0],bt=vt[1],xt=(0,p.useState)({}),wt=xt[0],St=xt[1],Tt=(0,p.useState)(!0),Nt=Tt[0],jt=Tt[1],Ft=(0,p.useState)(!1),Ct=(Ft[0],Ft[1],(0,p.useState)(!0)),_t=Ct[0],At=Ct[1],Mt=(0,p.useState)(!1),Rt=(Mt[0],Mt[1]),Bt=(0,p.useState)(!1),It=(Bt[0],Bt[1]),Zt=(0,p.useState)(!1),Dt=Zt[0],Et=Zt[1],Ut=(0,p.useState)(!1),Ot=Ut[0],Yt=Ut[1],Pt=(0,p.useState)(!1),Lt=Pt[0],Wt=Pt[1],Ht=(0,p.useState)(!1),Vt=Ht[0],Gt=Ht[1],Jt=(0,p.useState)(!1),Xt=Jt[0],Kt=Jt[1],qt=(0,p.useState)(!1),zt=qt[0],Qt=qt[1],$t=(0,p.useState)(!1),en=$t[0],tn=$t[1],nn=(0,p.useState)(!1),an=nn[0],sn=nn[1],rn=(0,p.useState)(!1);rn[0],rn[1];(0,p.useEffect)((function(){t&&t.chainId&&t.nftCollection&&t.rewardToken&&t.farmContract&&(R(t.chainId),Z(t.nftCollection),U(t.rewardToken),P(t.farmContract))}),[t]);var on=function(e,t){var n=!1;try{n=e.message.replace("Internal JSON-RPC error.",""),n=JSON.parse(n)}catch(a){}switch(n&&n.message?n.message:e.message){case"execution reverted: You don't own this token!":console.log("You dont own this token");break;case"MetaMask Tx Signature: User denied transaction signature.":console.log("Transaction denied");break;case"execution reverted: ERC721: invalid token ID":console.log("Invalid token ID");break;default:console.log("Unkrnown error",e.message)}},cn=function(){_("do fetchAvailableReward");try{we(!1),ge(!0),Q.methods.availableRewards(K).call().then((function(e){ke(e),ge(!1)}))}catch(e){console.log(">>> fail fetchAvailableReward"),on(e),we(!0)}},un=function(){_("do fetchTotalRewardBalance"),He(!0),Je(!1),Fe&&Fe.methods.balanceOf(Y).call().then((function(e){Pe(e),He(!1)})).catch((function(e){Je(!0),console.log(">>> fetchTotalRewardBalance",e),on(e)}))},ln=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_("do fetchIsApproved"),Qe(!0);try{te.methods.isApprovedForAll(K,Y).call().then((function(e){qe(e),Qe(!1)}))}catch(t){console.log(">>> fail check is approved"),on(t),Qe(!1)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pn=function(e){return _("do fetchTokenUris"),new Promise((function(t,n){if(K&&te&&se){var a=e.map((function(e){return{target:I,tokenId:e,callData:F.encodeFunctionData("tokenURI",[e])}}));se.methods.aggregate(a).call().then((function(n){var a={};n.returnData.forEach((function(t,n){var s=F.decodeFunctionResult("tokenURI",t)[0];a[e[n]]=s})),t(a)})).catch((function(e){on(e),n()}))}else n()}))},dn=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a,s,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_("do fetchUserNfts"),!(K&&te&&se)||et){e.next=33;break}return At(!0),Rt(!1),t=!1,n=!1,a=0,s=0,e.prev=8,e.next=11,te.methods.totalSupply().call();case 11:a=e.sent,t=!0,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log("Fail fetch total supply");case 18:return e.prev=18,e.next=21,te.methods.MAX_SUPPLY().call();case 21:s=e.sent,n=!0,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(18),console.log("Fail fetch max supply");case 28:if(console.log("hasMaxSupply",n),console.log("hasTotalSupply",t),console.log("maxSupply",s),console.log("totalSupply",a),n||t){for(It(!0),r=[],o=1;o<=(t?a:s);o++)r.push({target:I,callData:F.encodeFunctionData("ownerOf",[o])});se.methods.aggregate(r).call().then((function(e){var t=[];e.returnData.forEach((function(e,n){F.decodeFunctionResult("ownerOf",e)[0]===K&&t.push(n+1)})),bt(t),At(!1),jt(!0),pn(t).then((function(e){St(e),jt(!1)})).catch((function(e){jt(!1)}))})).catch((function(e){console.log(">>> fetchUserNfts",e),Rt(!0),on(e)}))}case 33:case"end":return e.stop()}}),e,null,[[8,15],[18,25]])})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){dn(),ie||me||le||mn()}),[K,te,se,Q,et]);var mn=function(){Q&&se&&(fe(!1),pe(!0),Q.methods.version().call().then((function(e){console.log(">>> farmVersion",e);t.farmContract;var n=(0,r.Z)({version:{func:"version",args:[]}},e>=2?{rewardsPerHour:{func:"rewardsPerHour",args:[]}}:{},e>=3?{lockEnabled:{func:"lockEnabled",args:[]},lockTime:{func:"lockTime",args:[]}}:{});(function(e){var t=e.multicall,n=e.target,a=e.encoder,s=e.calls;return new Promise((function(e,r){var o={},i=[],c=Object.keys(s).map((function(e){var t=s[e],r=t.func,o=t.args;return i.push(e),{target:n,callData:a.encodeFunctionData(r,o)}}));t.methods.aggregate(c).call().then((function(t){t.returnData.forEach((function(e,t){var n=a.decodeFunctionResult(s[i[t]].func,e)[0];n&&n._isBigNumber&&(n=n.toString()),o[i[t]]=n})),e(o)})).catch((function(e){r(e)}))}))})({multicall:se,target:t.farmContract,encoder:C,calls:n}).then((function(e){ce(e),fe(!0),pe(!1),console.log(e)})).catch((function(e){pe(!1),console.log(">>> err",e)}))})).catch((function(e){pe(!1),console.log(">>> fail fetchFarmStatus",e)})))};(0,p.useEffect)((function(){Fe&&(_("on useEffect rewardTokenContract"),Fe&&(Je(!1),Ue(!1),De(!0),Fe.methods.decimals().call().then((function(e){Fe.methods.symbol().call().then((function(t){De(!1),Ie(e),Me(t),un()})).catch((function(e){console.log(">>> reward token info - fail fetch symbol"),Je(!0),Ue(!0)}))})).catch((function(e){console.log(">>> reward token info - fail fetch decimals"),Je(!0),Ue(!0)}))))}),[Fe]),(0,p.useEffect)((function(){me&&ie&&(_("do fetchStakedNfts"),K&&Q&&ie&&(at(!1),kt(!1),tt(!0),Q.methods[ie.version>=3?"getStakedTokens_V3":"getStakedTokens"](K).call().then((function(e){var t={},n=e.map((function(e){return t[e.tokenId]=e.stackeUtx,e.tokenId}));ut(t),ot(n),tt(!1),yt(!0),pn(n).then((function(e){dt(e),yt(!1)})).catch((function(e){yt(!1),kt(!0)}))})).catch((function(e){at(!0),console.log(">>> fail fetchStakedNfts",e),on(e)}))))}),[me]),(0,p.useEffect)((function(){Q&&K&&(_("on useEffect farmContract && address"),cn())}),[K,Q]),(0,p.useEffect)((function(){K&&te&&(_("on useEffect address && nftContract"),ln())}),[K,te]);var fn=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G||"".concat(W)!="".concat(M)){e.next=4;break}G.eth.getAccounts().then((function(e){q(e[0]);var t=new G.eth.Contract(T,N.Ce[W]);console.log(t),re(t);var n=new G.eth.Contract(w,I);ne(n);var a=new G.eth.Contract(x(),E);Ce(a);var s=new G.eth.Contract(S.Mt,Y);$(s)})).catch((function(e){console.log(">>> initOnWeb3Ready",e),on(e)})),e.next=8;break;case 4:return e.next=6,(0,f.IC)();case 6:e.sent&&gn();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function yn(){return(yn=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K||!Q){e.next=7;break}return Ne(!0),d("Confirm transaction..."),e.next=5,(0,y.A)(K,Q,"claimRewards",[]);case 5:t=e.sent,Q.methods.claimRewards().send(t).then((function(e){cn(),un(),Ne(!1),d("Reward claimed","success")})).catch((function(e){Ne(!1),console.log(">>> claimRewards",e),on(e),d("Fail claim reward","error")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hn(e){return kn.apply(this,arguments)}function kn(){return kn=(0,a.Z)(c().mark((function e(t){var n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(K&&Q&&te)){e.next=22;break}if(n=function(){var e=(0,a.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Yt(!0),Wt(t),d("Confirm stake transaction"),e.next=6,(0,y.A)(K,Q,"stake",[t]);case 6:n=e.sent,Q.methods.stake(t).send(n).then((function(){var e=rt;e.push(t),ot(e),ut((function(e){return(0,o.Z)((0,r.Z)({},e),(0,s.Z)({},"".concat(t),(0,g.K)()))})),dt((0,o.Z)((0,r.Z)({},pt),(0,s.Z)({},"".concat(t),wt[t]))),bt(gt.filter((function(e){return"".concat(e)!=="".concat(t)}))),St((0,o.Z)((0,r.Z)({},wt),(0,s.Z)({},"".concat(t),!1))),Yt(!1),Wt(!1),d("NFT Staked!","success")})).catch((function(e){d("Stake transaction failed","error"),console.log(">> stakeNft",e),on(e),Yt(!1),Wt(!1)})),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(0),d("Stake transaction failed","error"),console.log(">> stakeNft calc gas",e.t0),on(e.t0),Yt(!1),Wt(!1);case 17:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Ke){e.next=21;break}return tn(t),Qt(!0),d("Confirm approve transaction"),e.prev=6,e.next=9,(0,y.A)(K,te,"setApprovalForAll",[Y,!0]);case 9:i=e.sent,te.methods.setApprovalForAll(Y,!0).send(i).then(function(){var e=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qe(!0),Qt(!1),d("Successfull approved!","success"),n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){d("Fail approve transaction","error"),console.log(">> stakeNft do approve",e),Qt(!1),on(e)})),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(6),d("Fail approve transaction","error"),console.log(">>> stakeNft do approve calc gas",e.t0),Qt(!1),on(e.t0);case 19:e.next=22;break;case 21:n();case 22:case"end":return e.stop()}}),e,null,[[6,13]])}))),kn.apply(this,arguments)}function vn(){return(vn=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K||!Q){e.next=18;break}return e.prev=1,Gt(!0),Kt(t),d("Confirm withdraw transaction"),e.next=7,(0,y.A)(K,Q,"withdraw",[t]);case 7:n=e.sent,Q.methods.withdraw(t).send(n).then((function(e){var n=gt;n.push(t),bt(n),ut((function(e){return(0,o.Z)((0,r.Z)({},e),(0,s.Z)({},"".concat(t),0))})),ot(rt.filter((function(e){return e!==t}))),St((0,o.Z)((0,r.Z)({},wt),(0,s.Z)({},"".concat(t),pt[t]))),dt((0,o.Z)((0,r.Z)({},pt),(0,s.Z)({},"".concat(t),!1))),Gt(!1),Kt(!1),d("NFT withdrawed","success")})).catch((function(e){console.log(">>> withdraw",e),on(e),Gt(!1),Kt(!1),d("Withdraw NFT transaction failed","error")})),e.next=18;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(">>> withdraw calc gas",e.t0),on(e.t0),Gt(!1),Kt(!1),d("Withdraw NFT transaction failed","error");case 18:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}(0,p.useEffect)((function(){_("on useEffect activeWeb3 initOnWeb3Ready"),M&&I&&E&&Y&&fn()}),[G,M,I,E,Y]);var gn=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(">>> connectWithMetamask",M),(0,f.pE)({onBeforeConnect:function(){sn(!0)},onSetActiveChain:H,onConnected:function(e,t){J(t),sn(!1)},onError:function(e){console.log(">>>> connectWithMetamask",e),on(e),sn(!1)},needChainId:M});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bn=("".concat(m().stakeCustomNftHolder),"".concat(m().mainButton," ").concat(m().spacerBottom," primaryButton"),function(e){var t=e.message;e.onReload;return(0,u.jsx)("b",{children:t})});return(0,u.jsxs)("div",{className:m().container,children:[(0,h.Z)("stake",n),(0,k.Z)({getText:b,getDesign:j}),(0,u.jsx)("h1",{className:"".concat(m().h1," pageTitle"),children:b("StakePage_Title","Stake Your NFTs - Earn ERC20")}),(0,u.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),K?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"stakeBeforeYourReward",children:b("StakePage_BeforeYourReward_Text")}),(0,u.jsx)("h2",{className:"stakeYourRewardLabel",children:b("StakePage_YourRewardLabel","Your reward")}),(0,u.jsx)("div",{className:"stakeAfterYourReward",children:b("StakePage_AfterYourReward_Text")}),(0,u.jsxs)("div",{className:m().tokenGrid,children:[(0,u.jsxs)("div",{className:"".concat(m().tokenItem," stakeRewardAndBank"),children:[(0,u.jsx)("h3",{className:m().tokenLabel,children:"Claimable Rewards"}),(0,u.jsx)("p",{className:m().tokenValue,children:xe?(0,u.jsx)(u.Fragment,{children:bn({message:"ERROR"})}):(0,u.jsx)("b",{children:he&&!1!==Be&&!1!==Ae?"".concat(l.bM(he,Be)," ").concat(Ae):"Loading..."})})]}),(0,u.jsxs)("div",{className:"".concat(m().tokenItem," stakeRewardAndBank"),children:[(0,u.jsx)("h3",{className:m().tokenLabel,children:"Stake Farm balance"}),(0,u.jsx)("p",{className:m().tokenValue,children:Ge?(0,u.jsx)(u.Fragment,{children:bn({message:"ERROR"})}):(0,u.jsx)("b",{children:We||!Ye||!1===Be||!1===Ae?"Loading...":"".concat(l.bM(Ye,Be)," ").concat(Ae)})})]})]}),(0,u.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,u.jsxs)("b",{className:"stakePageConnectedWallet",children:["Connected wallet ",K]}),(0,u.jsx)("button",{disabled:Te,className:"".concat(m().mainButton," ").concat(m().spacerTop," primaryButton"),onClick:function(){return function(){return yn.apply(this,arguments)}()},children:Te?"Receiving an award...":"Claim Rewards"}),(0,u.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,u.jsx)("h2",{className:"stakeYourStakedNfts",children:b("StakePage_YourStakedNfts","Your Staked NFTs")}),(0,u.jsx)("div",{className:"stakeYourStakedNftsDesc",children:b("StakePage_YourStakedNfts_Desc")}),(0,u.jsx)("div",{className:m().nftBoxGrid,children:et?(0,u.jsx)("p",{className:m().tokenValue,children:(0,u.jsx)("b",{children:"Loading..."})}):(0,u.jsx)(u.Fragment,{children:rt.length>0?(0,u.jsx)(u.Fragment,{children:null===rt||void 0===rt?void 0:rt.map((function(e){return(0,v.Z)({tokenId:e,tokenUri:!!pt[e]&&pt[e],isApproved:Ke,onDeStake:function(){return function(e){return vn.apply(this,arguments)}(e)},onStake:null,isFetchUri:ft,deStakeId:Xt,stakeId:Lt,isStaking:Ot,isDeStaking:Vt,isApproveDo:zt,isApproveId:en,farmStatus:ie,tokenUtx:!!ct[e]&&ct[e],openConfirmWindow:i})}))}):(0,u.jsx)("p",{className:m().tokenValue,children:(0,u.jsx)("b",{children:"You dont have staked NFTs."})})})}),(0,u.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,u.jsx)("h2",{className:"stakeYourUnstakedNfts",children:b("StakePage_YourUnStakedNfts","Your Unstaked NFTs")}),(0,u.jsx)("div",{className:"stakeYourUnstakedNftsDesc",children:b("StakePage_YourUnStakedNfts_Desc")}),(0,u.jsx)("div",{className:m().nftBoxGrid,children:_t?(0,u.jsx)("p",{className:m().tokenValue,children:(0,u.jsx)("b",{children:"Loading..."})}):(0,u.jsx)(u.Fragment,{children:gt.length>0?(0,u.jsx)(u.Fragment,{children:null===gt||void 0===gt?void 0:gt.map((function(e){return(0,v.Z)({tokenId:e,tokenUri:!!wt[e]&&wt[e],isApproved:Ke,onDeStake:null,onStake:function(){return hn(e)},isFetchUri:Nt,deStakeId:Xt,stakeId:Lt,isStaking:Ot,isDeStaking:Vt,isApproveDo:zt,isApproveId:en})}))}):(0,u.jsx)("p",{className:m().tokenValue,children:(0,u.jsx)("b",{children:"You dont have Unstaked NFTs."})})})})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"stakeBeforeConnectWallet",children:b("StakePage_BeforeConnect_Text")}),(0,u.jsx)("button",{disabled:an,className:"".concat(m().mainButton," primaryButton"),onClick:gn,children:an?"Connecting":"Connect Wallet"}),(0,u.jsx)("div",{className:"stakeAfterConnectWallet",children:b("StakePage_AfterConnect_Text")})]}),!1]})}},99312:function(e){"use strict";e.exports=JSON.parse('[{"constant":false,"inputs":[{"components":[{"name":"target","type":"address"},{"name":"callData","type":"bytes"}],"name":"calls","type":"tuple[]"}],"name":"aggregate","outputs":[{"name":"blockNumber","type":"uint256"},{"name":"returnData","type":"bytes[]"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"blockNumber","type":"uint256"}],"name":"getBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockCoinbase","outputs":[{"name":"coinbase","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockDifficulty","outputs":[{"name":"difficulty","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockGasLimit","outputs":[{"name":"gaslimit","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockTimestamp","outputs":[{"name":"timestamp","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"getEthBalance","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getLastBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"}]')}},function(e){e.O(0,[497,853,774,888,179],(function(){return t=54997,e(e.s=t);var t}));var t=e.O();_N_E=t}]);