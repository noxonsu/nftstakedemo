(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{54997:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake",function(){return n(51817)}])},51817:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n(47568),s=n(14924),i=n(26042),r=n(69396),o=n(34051),u=n.n(o),c=n(85893),p=n(2593),l=n(35553),d=n(67294),y=n(214),f=n.n(y),m=n(78967),h=n(53419),b=n(15200),k=n(55460),v=n(10783),w=n(67297),x=n.n(w),g=function(e){var t=e.tokenId,n=e.tokenUri,a=e.isApproved,s=e.onDeStake,i=e.onStake,r=e.isFetchUri,o=e.deStakeId,u=e.stakeId,p=e.isStaking,l=e.isDeStaking,d=e.isApproveDo,y=e.isApproveId;return(0,c.jsxs)("div",{className:f().nftBox,children:[!1!==n&&x()(n)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h3",{children:["#",t]}),(0,c.jsx)("img",{src:n})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h3",{children:["#",t]}),r&&(0,c.jsx)("h2",{children:"Fetch info"})]}),null!==s&&(0,c.jsx)("button",{disabled:l||p||d,className:"".concat(f().mainButton," ").concat(f().spacerBottom),onClick:s,children:l&&o===t?(0,c.jsx)(c.Fragment,{children:"De-staking..."}):(0,c.jsx)(c.Fragment,{children:"De-stake"})}),null!==i&&(0,c.jsx)("button",{className:"".concat(f().mainButton," ").concat(f().spacerBottom),onClick:i,disabled:l||p||d,children:p&&u===t?(0,c.jsx)(c.Fragment,{children:"Staking..."}):(0,c.jsx)(c.Fragment,{children:d&&y===t?(0,c.jsx)(c.Fragment,{children:"Approving..."}):(0,c.jsx)(c.Fragment,{children:a?"Stake":"Approve & Stake"})})})]},t.toString())},T=n(64914),S=n.n(T),j=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"string","name":"tokenURI","type":"string"}],"name":"mintNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]'),N=JSON.parse('[{"inputs":[{"internalType":"address","name":"_nftCollection","type":"address"},{"internalType":"contract IERC20","name":"_rewardsToken","type":"address"},{"internalType":"uint256","name":"_rewardsPerHour","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[],"name":"adminWithdrawRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_staker","type":"address"}],"name":"availableRewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"claimRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getStakedTokens","outputs":[{"components":[{"internalType":"address","name":"staker","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"internalType":"struct Farm.StakedToken[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nftCollection","outputs":[{"internalType":"contract IERC721","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rewardsToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_rewardsPerHour","type":"uint256"}],"name":"setRewardsPerHour","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"stakerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"stakers","outputs":[{"internalType":"uint256","name":"amountStaked","type":"uint256"},{"internalType":"uint256","name":"timeOfLastUpdate","type":"uint256"},{"internalType":"uint256","name":"unclaimedRewards","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),M=JSON.parse('[{"constant":false,"inputs":[{"components":[{"name":"target","type":"address"},{"name":"callData","type":"bytes"}],"name":"calls","type":"tuple[]"}],"name":"aggregate","outputs":[{"name":"blockNumber","type":"uint256"},{"name":"returnData","type":"bytes[]"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"blockNumber","type":"uint256"}],"name":"getBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockCoinbase","outputs":[{"name":"coinbase","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockDifficulty","outputs":[{"name":"difficulty","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockGasLimit","outputs":[{"name":"gaslimit","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockTimestamp","outputs":[{"name":"timestamp","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"getEthBalance","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getLastBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"}]'),F=n(64262),I=n(81586),C="0xefeffe4d50392998efe4cf46b6fbaa19a58a041a",A="0x8b740b4ad15e2201f291cbfc487977b0ecb5fc84",R=new I.vU(j),O=function(e){console.log(e)},E=function(){var e=(0,d.useState)(!1),t=e[0],n=e[1],o=(0,d.useState)(!1),y=o[0],w=o[1],x=(0,d.useState)(!1),T=x[0],I=x[1],E=(0,d.useState)(!1),D=E[0],Z=E[1],_=(0,d.useState)(!1),B=_[0],U=_[1],P=(0,d.useState)(!1),L=P[0],Y=P[1],H=(0,d.useState)(!1),V=H[0],W=H[1],J=(0,d.useState)(!0),G=(J[0],J[1]),X=(0,d.useState)(!1),Q=X[0],$=X[1],q=(0,d.useState)(!1),z=q[0],K=q[1],ee=(0,d.useState)(!1),te=ee[0],ne=ee[1],ae=(0,d.useState)(!1),se=ae[0],ie=ae[1],re=(0,d.useState)(!0),oe=(re[0],re[1]),ue=(0,d.useState)(!1),ce=(ue[0],ue[1]),pe=(0,d.useState)(!1),le=pe[0],de=pe[1],ye=(0,d.useState)(!0),fe=ye[0],me=ye[1],he=(0,d.useState)(!1),be=he[0],ke=he[1],ve=(0,d.useState)(!1),we=ve[0],xe=ve[1],ge=(0,d.useState)(!0),Te=(ge[0],ge[1]),Se=(0,d.useState)(!0),je=Se[0],Ne=Se[1],Me=(0,d.useState)(!1),Fe=(Me[0],Me[1]),Ie=(0,d.useState)([]),Ce=Ie[0],Ae=Ie[1],Re=(0,d.useState)({}),Oe=Re[0],Ee=Re[1],De=(0,d.useState)(!1),Ze=De[0],_e=De[1],Be=(0,d.useState)(!1),Ue=(Be[0],Be[1]),Pe=(0,d.useState)([]),Le=Pe[0],Ye=Pe[1],He=(0,d.useState)({}),Ve=He[0],We=He[1],Je=(0,d.useState)(!0),Ge=Je[0],Xe=Je[1],Qe=(0,d.useState)(!1),$e=(Qe[0],Qe[1],(0,d.useState)(!0)),qe=$e[0],ze=$e[1],Ke=(0,d.useState)(!1),et=(Ke[0],Ke[1]),tt=(0,d.useState)(!1),nt=(tt[0],tt[1]),at=(0,d.useState)(!1),st=at[0],it=at[1],rt=(0,d.useState)(!1),ot=rt[0],ut=rt[1],ct=(0,d.useState)(!1),pt=ct[0],lt=ct[1],dt=(0,d.useState)(!1),yt=dt[0],ft=dt[1],mt=(0,d.useState)(!1),ht=mt[0],bt=mt[1],kt=(0,d.useState)(!1),vt=kt[0],wt=kt[1],xt=(0,d.useState)(!1),gt=xt[0],Tt=xt[1],St=(0,d.useState)(!1),jt=St[0],Nt=St[1],Mt=(0,d.useState)(!1),Ft=(Mt[0],Mt[1],function(e,t){var n=!1;try{n=e.message.replace("Internal JSON-RPC error.",""),n=JSON.parse(n)}catch(a){}switch(n&&n.message?n.message:e.message){case"execution reverted: You don't own this token!":console.log("You dont own this token");break;case"MetaMask Tx Signature: User denied transaction signature.":console.log("Transaction denied");break;case"execution reverted: ERC721: invalid token ID":console.log("Invalid token ID");break;default:console.log("Unkrnown error",e.message)}}),It=function(){O("do fetchAvailableReward");try{$(!1),G(!0),D.methods.availableRewards(T).call().then((function(e){W(e),G(!1)}))}catch(e){console.log(">>> fail fetchAvailableReward"),Ft(e),$(!0)}},Ct=function(){O("do fetchTotalRewardBalance"),me(!0),ke(!1),z&&z.methods.balanceOf(A).call().then((function(e){de(e),me(!1)})).catch((function(e){ke(!0),console.log(">>> fetchTotalRewardBalance",e),Ft(e)}))},At=function(){var e=(0,a.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O("do fetchIsApproved"),Te(!0);try{B.methods.isApprovedForAll(T,A).call().then((function(e){xe(e),Te(!1)}))}catch(t){console.log(">>> fail check is approved"),Ft(t),Te(!1)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rt=function(e){return O("do fetchTokenUris"),new Promise((function(t,n){if(T&&B&&L){var a=e.map((function(e){return{target:C,tokenId:e,callData:R.encodeFunctionData("tokenURI",[e])}}));L.methods.aggregate(a).call().then((function(n){var a={};n.returnData.forEach((function(t,n){var s=R.decodeFunctionResult("tokenURI",t)[0];a[e[n]]=s})),t(a)})).catch((function(e){Ft(e),n()}))}else n()}))},Ot=function(){var e=(0,a.Z)(u().mark((function e(){var t,n,a,s,i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O("do fetchUserNfts"),!(T&&B&&L)||je){e.next=33;break}return ze(!0),et(!1),t=!1,n=!1,a=0,s=0,e.prev=8,e.next=11,B.methods.totalSupply().call();case 11:a=e.sent,t=!0,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log("Fail fetch total supply");case 18:return e.prev=18,e.next=21,B.methods.MAX_SUPPLY().call();case 21:s=e.sent,n=!0,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(18),console.log("Fail fetch max supply");case 28:if(console.log("hasMaxSupply",n),console.log("hasTotalSupply",t),console.log("maxSupply",s),console.log("totalSupply",a),n||t){for(nt(!0),i=[],r=1;r<=(t?a:s);r++)i.push({target:C,callData:R.encodeFunctionData("ownerOf",[r])});L.methods.aggregate(i).call().then((function(e){var t=[];e.returnData.forEach((function(e,n){R.decodeFunctionResult("ownerOf",e)[0]===T&&t.push(n+1)})),Ye(t),ze(!1),Xe(!0),Rt(t).then((function(e){We(e),Xe(!1)})).catch((function(e){Xe(!1)}))})).catch((function(e){console.log(">>> fetchUserNfts",e),et(!0),Ft(e)}))}case 33:case"end":return e.stop()}}),e,null,[[8,15],[18,25]])})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){Ot()}),[T,B,L,D,je]);(0,d.useEffect)((function(){z&&(O("on useEffect rewardTokenContract"),z&&(ke(!1),ce(!1),oe(!0),z.methods.decimals().call().then((function(e){z.methods.symbol().call().then((function(t){oe(!1),ie(e),ne(t),Ct()})).catch((function(e){console.log(">>> reward token info - fail fetch symbol"),ke(!0),ce(!0)}))})).catch((function(e){console.log(">>> reward token info - fail fetch decimals"),ke(!0),ce(!0)}))))}),[z]),(0,d.useEffect)((function(){D&&T&&(O("on useEffect farmContract && address"),It(),O("do fetchStakedNfts"),T&&D&&(Fe(!1),Ue(!1),Ne(!0),D.methods.getStakedTokens(T).call().then((function(e){e=e.map((function(e){return e.tokenId})),Ae(e),Ne(!1),_e(!0),Rt(e).then((function(e){Ee(e),_e(!1)})).catch((function(e){_e(!1),Ue(!0)}))})).catch((function(e){Fe(!0),console.log(">>> fail fetchStakedNfts",e),Ft(e)}))))}),[T,D]),(0,d.useEffect)((function(){T&&B&&(O("on useEffect address && nftContract"),At())}),[T,B]);var Et=function(){var e=(0,a.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y&&"".concat(t)=="".concat(5)&&y.eth.getAccounts().then((function(e){I(e[0]);var n=new y.eth.Contract(M,F.Ce[t]);console.log(n),Y(n);var a=new y.eth.Contract(j,C);U(a);var s=new y.eth.Contract(S(),"0xaFF4481D10270F50f203E0763e2597776068CBc5");K(s);var i=new y.eth.Contract(N,A);Z(i)})).catch((function(e){console.log(">>> initOnWeb3Ready",e),Ft(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Dt(){return(Dt=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T||!D){e.next=5;break}return e.next=3,(0,h.A)(T,D,"claimRewards",[]);case 3:t=e.sent,D.methods.claimRewards().send(t).then((function(e){It(),Ct()})).catch((function(e){console.log(">>> claimRewards",e),Ft(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(e){return _t.apply(this,arguments)}function _t(){return _t=(0,a.Z)(u().mark((function e(t){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(T&&D&&B)){e.next=20;break}if(n=function(){var e=(0,a.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ut(!0),lt(t),e.next=5,(0,h.A)(T,D,"stake",[t]);case 5:n=e.sent,D.methods.stake(t).send(n).then((function(){var e=Ce;e.push(t),Ae(e),Ee((0,r.Z)((0,i.Z)({},Oe),(0,s.Z)({},"".concat(t),Ve[t]))),Ye(Le.filter((function(e){return"".concat(e)!=="".concat(t)}))),We((0,r.Z)((0,i.Z)({},Ve),(0,s.Z)({},"".concat(t),!1))),ut(!1),lt(!1)})).catch((function(e){console.log(">> stakeNft",e),Ft(e),ut(!1),lt(!1)})),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(">> stakeNft calc gas",e.t0),Ft(e.t0),ut(!1),lt(!1);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),we){e.next=19;break}return Tt(t),wt(!0),e.prev=5,e.next=8,(0,h.A)(T,B,"setApprovalForAll",[A,!0]);case 8:o=e.sent,B.methods.setApprovalForAll(A,!0).send(o).then(function(){var e=(0,a.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xe(!0),wt(!1),n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(">> stakeNft do approve",e),wt(!1),Ft(e)})),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(">>> stakeNft do approve calc gas",e.t0),wt(!1),Ft(e.t0);case 17:e.next=20;break;case 19:n();case 20:case"end":return e.stop()}}),e,null,[[5,12]])}))),_t.apply(this,arguments)}function Bt(){return(Bt=(0,a.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T||!D){e.next=16;break}return e.prev=1,ft(!0),bt(t),e.next=6,(0,h.A)(T,D,"withdraw",[t]);case 6:n=e.sent,D.methods.withdraw(t).send(n).then((function(e){var n=Le;n.push(t),Ye(n),Ae(Ce.filter((function(e){return e!==t}))),We((0,r.Z)((0,i.Z)({},Ve),(0,s.Z)({},"".concat(t),Oe[t]))),Ee((0,r.Z)((0,i.Z)({},Oe),(0,s.Z)({},"".concat(t),!1))),ft(!1),bt(!1)})).catch((function(e){console.log(">>> withdraw",e),Ft(e),ft(!1),bt(!1)})),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(">>> withdraw calc gas",e.t0),Ft(e.t0),ft(!1),bt(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}(0,d.useEffect)((function(){O("on useEffect activeWeb3 initOnWeb3Ready"),Et()}),[y]);var Ut=function(){var e=(0,a.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,m.pE)({onBeforeConnect:function(){Nt(!0)},onSetActiveChain:n,onConnected:function(e,t){w(t),Nt(!1)},onError:function(e){console.log(">>>> connectWithMetamask",e),Ft(e),Nt(!1)},needChainId:5});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pt=(0,c.jsxs)("div",{className:"".concat(f().stakeCustomNftHolder),children:[(0,c.jsx)("b",{children:"Stake NFT by TokenId"}),(0,c.jsx)("input",{type:"number",onChange:function(e){return it(e.target.value)}}),(0,c.jsx)("button",{className:"".concat(f().mainButton," ").concat(f().spacerBottom),onClick:function(){st&&(console.log(">>> stake custom nft",st),Zt(p.O$.from(st).toNumber()))},disabled:vt||ot||yt,children:we?"Stake":"Approve & Stake"})]}),Lt=function(e){var t=e.message;e.onReload;return(0,c.jsx)("b",{children:t})};return(0,c.jsxs)("div",{className:f().container,children:[(0,b.Z)("stake",!1),(0,k.Z)(),(0,c.jsx)("h1",{className:f().h1,children:(0,v.Q)("Stake Your NFTs - Earn ERC20","StakePage_Title")}),(0,c.jsx)("hr",{className:"".concat(f().divider," ").concat(f().spacerTop)}),T?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{children:"Your reward"}),(0,c.jsxs)("div",{className:f().tokenGrid,children:[(0,c.jsxs)("div",{className:f().tokenItem,children:[(0,c.jsx)("h3",{className:f().tokenLabel,children:"Claimable Rewards"}),(0,c.jsx)("p",{className:f().tokenValue,children:Q?(0,c.jsx)(c.Fragment,{children:Lt({message:"ERROR"})}):(0,c.jsx)("b",{children:V&&!1!==se&&!1!==te?"".concat(l.bM(V,se)," ").concat(te):"Loading..."})})]}),(0,c.jsxs)("div",{className:f().tokenItem,children:[(0,c.jsx)("h3",{className:f().tokenLabel,children:"Stake Farm balance"}),(0,c.jsx)("p",{className:f().tokenValue,children:be?(0,c.jsx)(c.Fragment,{children:Lt({message:"ERROR"})}):(0,c.jsx)("b",{children:fe||!le||!1===se||!1===te?"Loading...":"".concat(l.bM(le,se)," ").concat(te)})})]})]}),(0,c.jsx)("hr",{className:"".concat(f().divider," ").concat(f().spacerTop)}),(0,c.jsxs)("b",{children:["Connected wallet ",T]}),(0,c.jsx)("button",{className:"".concat(f().mainButton," ").concat(f().spacerTop),onClick:function(){return function(){return Dt.apply(this,arguments)}()},children:"Claim Rewards"}),(0,c.jsx)("hr",{className:"".concat(f().divider," ").concat(f().spacerTop)}),(0,c.jsx)("h2",{children:"Your Staked NFTs"}),(0,c.jsx)("div",{className:f().nftBoxGrid,children:je?(0,c.jsx)("p",{className:f().tokenValue,children:(0,c.jsx)("b",{children:"Loading..."})}):(0,c.jsx)(c.Fragment,{children:Ce.length>0?(0,c.jsx)(c.Fragment,{children:null===Ce||void 0===Ce?void 0:Ce.map((function(e){return g({tokenId:e,tokenUri:!!Oe[e]&&Oe[e],isApproved:we,onDeStake:function(){return function(e){return Bt.apply(this,arguments)}(e)},onStake:null,isFetchUri:Ze,deStakeId:ht,stakeId:pt,isStaking:ot,isDeStaking:yt,isApproveDo:vt,isApproveId:gt})}))}):(0,c.jsx)("p",{className:f().tokenValue,children:(0,c.jsx)("b",{children:"You dont have staked NFTs."})})})}),(0,c.jsx)("hr",{className:"".concat(f().divider," ").concat(f().spacerTop)}),(0,c.jsx)("h2",{children:"Your Unstaked NFTs"}),Pt,(0,c.jsx)("div",{className:f().nftBoxGrid,children:qe?(0,c.jsx)("p",{className:f().tokenValue,children:(0,c.jsx)("b",{children:"Loading..."})}):(0,c.jsx)(c.Fragment,{children:Le.length>0?(0,c.jsx)(c.Fragment,{children:null===Le||void 0===Le?void 0:Le.map((function(e){return g({tokenId:e,tokenUri:!!Ve[e]&&Ve[e],isApproved:we,onDeStake:null,onStake:function(){return Zt(e)},isFetchUri:Ge,deStakeId:ht,stakeId:pt,isStaking:ot,isDeStaking:yt,isApproveDo:vt,isApproveId:gt})}))}):(0,c.jsx)("p",{className:f().tokenValue,children:(0,c.jsx)("b",{children:"You dont have Unstaked NFTs."})})})})]}):(0,c.jsx)("button",{disabled:jt,className:f().mainButton,onClick:Ut,children:jt?"Connecting":"Connect Wallet"}),!1]})}},24654:function(){}},function(e){e.O(0,[482,714,955,778,69,774,888,179],(function(){return t=54997,e(e.s=t);var t}));var t=e.O();_N_E=t}]);